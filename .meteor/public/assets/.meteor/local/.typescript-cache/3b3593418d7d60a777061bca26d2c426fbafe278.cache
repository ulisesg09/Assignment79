{"code":"var meteor_1 = require('meteor/meteor');\r\nvar collections_1 = require('../imports/collections');\r\nmeteor_1.Meteor.methods({\r\n    addMessage: function (type, chatId, content) {\r\n        var chatExists = !!collections_1.Chats.collection.find(chatId).count();\r\n        if (!chatExists) {\r\n            throw new meteor_1.Meteor.Error('chat-not-exists', 'Chat doesn\\'t exist');\r\n        }\r\n        return {\r\n            messageId: collections_1.Messages.collection.insert({\r\n                chatId: chatId,\r\n                content: content,\r\n                createdAt: new Date(),\r\n                type: type\r\n            })\r\n        };\r\n    }\r\n});\r\n//# sourceMappingURL=methods.js.map","sourceMap":{"version":3,"file":"methods.js","sourceRoot":"","sources":["server/methods.ts"],"names":[],"mappings":"AAAA,uBAAuB,eAAe,CAAC,CAAA;AACvC,4BAAgC,wBAAwB,CAAC,CAAA;AAGzD,eAAM,CAAC,OAAO,CAAC;IACb,UAAU,YAAC,IAAiB,EAAE,MAAc,EAAE,OAAe;QAC3D,IAAM,UAAU,GAAG,CAAC,CAAC,mBAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC;QAE3D,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YAChB,MAAM,IAAI,eAAM,CAAC,KAAK,CAAC,iBAAiB,EACtC,qBAAqB,CAAC,CAAC;QAC3B,CAAC;QAED,MAAM,CAAC;YACL,SAAS,EAAE,sBAAQ,CAAC,UAAU,CAAC,MAAM,CAAC;gBACpC,MAAM,EAAE,MAAM;gBACd,OAAO,EAAE,OAAO;gBAChB,SAAS,EAAE,IAAI,IAAI,EAAE;gBACrB,IAAI,EAAE,IAAI;aACX,CAAC;SACH,CAAC;IACJ,CAAC;CACF,CAAC,CAAC","sourcesContent":["import { Meteor } from 'meteor/meteor';\r\nimport { Chats, Messages } from '../imports/collections';\r\nimport { MessageType } from '../imports/models';\r\n \r\nMeteor.methods({\r\n  addMessage(type: MessageType, chatId: string, content: string) {\r\n    const chatExists = !!Chats.collection.find(chatId).count();\r\n \r\n    if (!chatExists) {\r\n      throw new Meteor.Error('chat-not-exists',\r\n        'Chat doesn\\'t exist');\r\n    }\r\n \r\n    return {\r\n      messageId: Messages.collection.insert({\r\n        chatId: chatId,\r\n        content: content,\r\n        createdAt: new Date(),\r\n        type: type\r\n      })\r\n    };\r\n  }\r\n});"]},"version":"2","isExternal":true,"references":{"files":[],"modules":["imports/collections/index.ts","imports/models.ts"],"typings":[]},"diagnostics":{"syntacticErrors":[],"semanticErrors":[]},"hash":"3b3593418d7d60a777061bca26d2c426fbafe278"}