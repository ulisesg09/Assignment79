{"code":"var core_1 = require('@angular/core');\r\nvar ionic_angular_1 = require('ionic-angular');\r\nvar phone_1 = require('../../services/phone');\r\nvar verification_1 = require('../verification/verification');\r\nvar login_html_1 = require('./login.html');\r\nvar LoginPage = (function () {\r\n    function LoginPage(alertCtrl, phoneService, navCtrl) {\r\n        this.alertCtrl = alertCtrl;\r\n        this.phoneService = phoneService;\r\n        this.navCtrl = navCtrl;\r\n        this.phone = '';\r\n    }\r\n    LoginPage.prototype.onInputKeypress = function (_a) {\r\n        var keyCode = _a.keyCode;\r\n        if (keyCode === 13) {\r\n            this.login();\r\n        }\r\n    };\r\n    LoginPage.prototype.login = function (phone) {\r\n        var _this = this;\r\n        if (phone === void 0) { phone = this.phone; }\r\n        var alert = this.alertCtrl.create({\r\n            title: 'Confirm',\r\n            message: \"Would you like to proceed with the phone number \" + phone + \"?\",\r\n            buttons: [\r\n                {\r\n                    text: 'Cancel',\r\n                    role: 'cancel'\r\n                },\r\n                {\r\n                    text: 'Yes',\r\n                    handler: function () {\r\n                        _this.handleLogin(alert);\r\n                        return false;\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        alert.present();\r\n    };\r\n    LoginPage.prototype.handleLogin = function (alert) {\r\n        var _this = this;\r\n        alert.dismiss().then(function () {\r\n            return _this.phoneService.verify(_this.phone);\r\n        })\r\n            .then(function () {\r\n            _this.navCtrl.push(verification_1.VerificationPage, {\r\n                phone: _this.phone\r\n            });\r\n        })\r\n            .catch(function (e) {\r\n            _this.handleError(e);\r\n        });\r\n    };\r\n    LoginPage.prototype.handleError = function (e) {\r\n        console.error(e);\r\n        var alert = this.alertCtrl.create({\r\n            title: 'Oops!',\r\n            message: e.message,\r\n            buttons: ['OK']\r\n        });\r\n        alert.present();\r\n    };\r\n    LoginPage = __decorate([\r\n        core_1.Component({\r\n            template: login_html_1.default\r\n        }), \r\n        __metadata('design:paramtypes', [Object, phone_1.PhoneService, Object])\r\n    ], LoginPage);\r\n    return LoginPage;\r\n}());\r\nexports.LoginPage = LoginPage;\r\n//# sourceMappingURL=login.js.map","sourceMap":{"version":3,"file":"login.js","sourceRoot":"","sources":["client/imports/pages/login/login.ts"],"names":[],"mappings":"AAAA,qBAA0B,eAAe,CAAC,CAAA;AAC1C,8BAAsD,eAAe,CAAC,CAAA;AACtE,sBAA6B,sBAAsB,CAAC,CAAA;AACpD,6BAAiC,8BAA8B,CAAC,CAAA;AAChE,2BAAqB,cAAc,CAAC,CAAA;AAKpC;IAGE,mBACU,SAA0B,EAC1B,YAA0B,EAC1B,OAAsB;QAFtB,cAAS,GAAT,SAAS,CAAiB;QAC1B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,YAAO,GAAP,OAAO,CAAe;QALhC,UAAK,GAAG,EAAE,CAAC;IAMR,CAAC;IAEJ,mCAAe,GAAf,UAAgB,EAAwB;YAAvB,oBAAO;QACtB,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC;IACH,CAAC;IAED,yBAAK,GAAL,UAAM,KAA0B;QAAhC,iBAoBC;QApBK,qBAA0B,GAA1B,QAAgB,IAAI,CAAC,KAAK;QAC9B,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,KAAK,EAAE,SAAS;YAChB,OAAO,EAAE,qDAAmD,KAAK,MAAG;YACpE,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,QAAQ;iBACf;gBACD;oBACE,IAAI,EAAE,KAAK;oBACX,OAAO,EAAE;wBACP,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;wBACxB,MAAM,CAAC,KAAK,CAAC;oBACf,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,+BAAW,GAAX,UAAY,KAAY;QAAxB,iBAYC;QAXC,KAAK,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACnB,MAAM,CAAC,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC,CAAC;aACA,IAAI,CAAC;YACL,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,+BAAgB,EAAE;gBAClC,KAAK,EAAE,KAAI,CAAC,KAAK;aAClB,CAAC,CAAC;QACL,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,CAAC;YACP,KAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+BAAW,GAAX,UAAY,CAAQ;QAClB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAEjB,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,KAAK,EAAE,OAAO;YACd,OAAO,EAAE,CAAC,CAAC,OAAO;YAClB,OAAO,EAAE,CAAC,IAAI,CAAC;SAChB,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAhEH;QAAC,gBAAS,CAAC;YACT,8BAAQ;SACT,CAAC;;iBAAA;IA+DF,gBAAC;AAAD,CAAC,AA9DD,IA8DC;AA9DY,iBAAS,YA8DrB,CAAA","sourcesContent":["import { Component } from '@angular/core';\r\nimport { Alert, AlertController, NavController } from 'ionic-angular';\r\nimport { PhoneService } from '../../services/phone';\r\nimport { VerificationPage } from '../verification/verification';\r\nimport template from './login.html';\r\n \r\n@Component({\r\n  template\r\n})\r\nexport class LoginPage {\r\n  phone = '';\r\n \r\n  constructor(\r\n    private alertCtrl: AlertController,\r\n    private phoneService: PhoneService,\r\n    private navCtrl: NavController\r\n  ) {}\r\n \r\n  onInputKeypress({keyCode}: KeyboardEvent): void {\r\n    if (keyCode === 13) {\r\n      this.login();\r\n    }\r\n  }\r\n \r\n  login(phone: string = this.phone): void {\r\n    const alert = this.alertCtrl.create({\r\n      title: 'Confirm',\r\n      message: `Would you like to proceed with the phone number ${phone}?`,\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: 'Yes',\r\n          handler: () => {\r\n            this.handleLogin(alert);\r\n            return false;\r\n          }\r\n        }\r\n      ]\r\n    });\r\n \r\n    alert.present();\r\n  }\r\n \r\n  handleLogin(alert: Alert): void {\r\n    alert.dismiss().then(() => {\r\n      return this.phoneService.verify(this.phone);\r\n    })\r\n     .then(() => {\r\n      this.navCtrl.push(VerificationPage, {\r\n        phone: this.phone\r\n      });\r\n    })\r\n    .catch((e) => {\r\n      this.handleError(e);\r\n    });\r\n  }\r\n \r\n  handleError(e: Error): void {\r\n    console.error(e);\r\n \r\n    const alert = this.alertCtrl.create({\r\n      title: 'Oops!',\r\n      message: e.message,\r\n      buttons: ['OK']\r\n    });\r\n \r\n    alert.present();\r\n  }\r\n}"]},"version":"1","isExternal":true,"references":{"files":[],"modules":["client/imports/services/phone.ts","client/imports/pages/verification/verification.ts"],"typings":[]},"diagnostics":{"syntacticErrors":[],"semanticErrors":[{"code":2304,"fileName":"client/imports/pages/login/login.ts","message":"Cannot find name 'AlertController'.","line":14,"column":24},{"code":2304,"fileName":"client/imports/pages/login/login.ts","message":"Cannot find name 'NavController'.","line":16,"column":22},{"code":2304,"fileName":"client/imports/pages/login/login.ts","message":"Cannot find name 'Alert'.","line":47,"column":22}]},"hash":"b1192f2c962e74c5e68c9a4bf938d0e8d5538bf6"}